{"dependencies":[{"name":"/home/akiohayakawa/workspace/browser_editor/package.json","includedInParent":true,"mtime":1532065308636},{"name":"vueify/lib/insert-css","loc":{"line":1,"column":39}},{"name":"babel-runtime/core-js/object/assign","loc":{"line":9,"column":22}},{"name":"babel-runtime/core-js/json/stringify","loc":{"line":13,"column":25}},{"name":"./../../EditorUtils","loc":{"line":17,"column":27}},{"name":"./../../misc/Definitions","loc":{"line":21,"column":27}},{"name":"vue/dist/vue.esm.js","loc":{"line":25,"column":22}},{"name":"../../../image/Etc.svg","loc":{"line":381,"column":955}},{"name":"../../../image/Load.svg","loc":{"line":381,"column":2760}}],"generated":{"js":"var t=require(\"vueify/lib/insert-css\").insert(\".job.active,.job:hover{background-color:var(--color-gray0)}.job-content{height:100%;border-bottom:solid 1px var(--color-gray3);margin:0 16px;padding:16px 0;word-wrap:break-word}.job-title{font-family:SSTUI-Medium;color:var(--color-gray5)}.job-status,.job-title{font-size:13px;line-height:13px;margin-left:30px}.job-status{opacity:.5;color:var(--color-brand)}.job-top{clear:both}.job-headline{width:100%}.job-top-image-btn{letter-spacing:5px;float:right}.job-top-image{width:24px;height:24px}.job-property{margin-top:5px;min-height:80px;clear:both}.job-property-name{width:104px;letter-spacing:0;float:left}.job-property-value{width:45%;letter-spacing:0;float:left}.job-property-name>p{color:var(--color-gray4);line-height:20px;margin:0}.job-property-value>p{color:var(--color-gray5);line-height:20px;margin:0;width:125px}.job-compare{margin:0 6px;height:15%;clear:both}.pareto-optimal{font-size:13px;color:var(--color-brand);line-height:13px}.image-btn{border-style:none}canvas[data-id^=job-progress-]{position:absolute}.load-more{padding:18px 20px}.load-more:hover{background-color:var(--color-gray0)}.load-more>img{width:16px;margin-right:12px}.load-more>img.loading{animation:rotate-anime 1s linear infinite}@keyframes rotate-anime{0%{transform:rotate(0)}to{transform:rotate(1turn)}}\");!function(){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var t=a(require(\"babel-runtime/core-js/object/assign\")),e=a(require(\"babel-runtime/core-js/json/stringify\")),n=a(require(\"./../../EditorUtils\")),i=a(require(\"./../../misc/Definitions\")),o=a(require(\"vue/dist/vue.esm.js\"));function a(t){return t&&t.__esModule?t:{default:t}}exports.default={data:function(){return{results:results,selected_result:\"\",result_menu_items:[{type:\"action\",text:\"Download\",action:this.download},{type:\"action\",text:\"Rename\",action:this.rename},{type:\"separator\"},{type:\"action\",text:\"Open Learning Curve for Comparison\",action:this.open_comparison},{type:\"action\",text:\"Clear Learning Curve for Comparison\",action:this.clear_comparison},{type:\"separator\"},{type:\"action\",text:i.default.strings.menu_retrain_not_in_place,action:this.retrain_not_in_place},{type:\"action\",text:\"Suspend\",action:this.suspendLearning},{type:\"action\",text:\"Resume\",action:this.resumeJob},{type:\"separator\"},{type:\"action\",text:i.default.strings.menu_training_extract_network,action:this.open_network},{type:\"action\",text:i.default.strings.menu_training_extract_network_w_weight,action:this.open_network_with_weight},{type:\"separator\"},{type:\"action\",text:\"Delete\",action:this.delete_confirm},{type:\"action\",text:\"Delete All Incomplete  Results\",action:this.delete_all_incompletes}],nontarget_menu_items:[{type:\"action\",text:\"Download\",disabled:!0},{type:\"action\",text:\"Rename\",disabled:!0},{type:\"separator\"},{type:\"action\",text:\"Open Learning Curve for Comparison\",disabled:!0},{type:\"action\",text:\"Clear Learning Curve for Comparison\",action:this.clear_comparison},{type:\"separator\"},{type:\"action\",text:i.default.strings.menu_retrain_not_in_place,disabled:!0},{type:\"action\",text:\"Suspend\",disabled:!0},{type:\"action\",text:\"Resume\",disabled:!0},{type:\"separator\"},{type:\"action\",text:i.default.strings.menu_training_extract_network,disabled:!0},{type:\"action\",text:i.default.strings.menu_training_extract_network_w_weight,disabled:!0},{type:\"separator\"},{type:\"action\",text:\"Delete\",disabled:!0},{type:\"action\",text:\"Delete All Incomplete  Results\",action:this.delete_all_incompletes}],isLoading:!1}},mounted:function(){this.updateProgressIcons()},beforeUpdate:function(){this.updateProgressIcons()},computed:{menu_items:function(){return this.selected_result?this.result_menu_items:this.nontarget_menu_items}},methods:{showError:function(t){return void 0!==t?t.toFixed(6):\"-\"},changeActive:function(t){ResultsUtils.changeActive(t.job_id)},select_result:function(t){this.selected_result=t},open_menu:function(t,e,n){if(e.preventDefault(),t&&\"active\"!=t||\"active\"==t&&ResultsUtils.getActiveResult()){\"active\"==t&&(t=ResultsUtils.getActiveResult());var o=this.result_menu_items.find(function(t){return\"Suspend\"==t.text});o&&(o.disabled=(a=t.status,![\"queued\",\"preprocessing\",\"processing\"].includes(a))),this.result_menu_items.find(function(t){return\"Resume\"===t.text}).disabled=\"suspended\"!==t.status,this.result_menu_items.find(function(t){return\"Download\"===t.text}).disabled=\"profile\"===t.type||\"finished\"!==t.status||!t.train_status,this.result_menu_items.find(function(t){return t.text===i.default.strings.menu_retrain_not_in_place}).disabled=[\"queued\",\"preprocessing\"].includes(t.status),this.result_menu_items.find(function(t){return t.text===i.default.strings.menu_training_extract_network}).disabled=[\"queued\",\"preprocessing\"].includes(t.status),this.result_menu_items.find(function(t){return t.text===i.default.strings.menu_training_extract_network_w_weight}).disabled=[\"queued\",\"preprocessing\"].includes(t.status)}else t=\"\";var a;this.select_result(t);var s={parent:this,event:e};if(\"dropdown\"==n){var r=document.elementFromPoint(e.clientX,e.clientY);s.point={x:r.x,y:r.y+r.height}}this.$refs.context_menu.$emit(\"open\",s),this.changeActive(t)},download:function(){n.default.callApi({url:i.default.CORE_API.usersUrl()+\"/projects/\"+nnc.editor.projectId+\"/jobs/\"+ResultsUtils.getActiveResult().job_id+\"/download\",type:\"GET\",dataType:\"json\"},function(t){var e=document.createElement(\"a\");e.href=t.download_url,e.click()},function(t,e,i){\"SDEEP_STATUS_INCORRECT\"===t.responseJSON.error?window.nnc.components.Editor.popup(\"Failed to download\",\"Can not download from a scheduled or runnning job.\",[{name:\"OK\"}]):n.default.handleXhrFailure(t,e,i)})},rename:function(){var t=this;window.nnc.components.Editor.prompt(\"Input new result name\",this.selected_result.job_name,[{name:\"Cancel\"},{name:\"OK\",action:function(o){o&&n.default.callApi({url:i.default.CORE_API.usersUrl()+\"/projects/\"+nnc.editor.projectId+\"/jobs/\"+ResultsUtils.getActiveResult().job_id+\"/job_name\",type:\"PUT\",data:(0,e.default)({job_name:o}),contentType:\"application/json\",dataType:\"json\"},function(e){t.selected_result.job_name=o},n.default.handleXhrFailure)}}])},open_comparison:function(){results.graph.comparison_id=this.selected_result.job_id},clear_comparison:function(){results.graph.comparison_id=\"\"},suspendLearning:function(){n.default.callApi({url:i.default.CORE_API.usersUrl()+\"/projects/\"+nnc.editor.projectId+\"/jobs/\"+ResultsUtils.getActiveResult().job_id+\"/suspend\",type:\"POST\",dataType:\"json\"},void 0,n.default.handleXhrFailure)},resumeJob:function(){var o=this,a=ResultsUtils.getActiveResult();n.default.callApi({url:i.default.CORE_API.usersUrl()+\"/projects/\"+nnc.editor.projectId+\"/jobs/\"+a.job_id+\"/resume\",type:\"POST\",data:(0,e.default)(function(e){var n={type:e.type};if(\"evaluate\"===e.type)try{var i=configs.data.find(function(t){return\"valid_error\"===t.name}).dataset,o=datasets.data.find(function(t){return t.name===i});(0,t.default)(n,{evaluation_dataset_id:o.id})}catch(t){throw console.error(t),window.nnc.components.Editor.popup(\"Dataset not found\",\"Specified dataset might have been deleted.\",[{name:\"OK\"}]),t}return n}(a)),contentType:\"application/json\",dataType:\"json\"},function(e){o.$emit(\"fetch-results\",function(){(0,t.default)(a,e),ResultsUtils.setPollingForTrainResult(a),ResultsUtils.changeActive(a.job_id)})},n.default.showPopupIfJobExceedsTimeLimitOrHandleAsDefaultFailureFor(a.type))},retrain_not_in_place:function(){var t=this;window.nnc.components.Editor.isLoadEnd=!1,ResultsUtils.getTrainResult(ResultsUtils.getActiveResult().job_id,function(){window.nnc.components.Editor.isLoadEnd=!0,t.$emit(\"trigger-job\",\"retrainNotInPlace\")})},open_network:function(){var t=this,e=ResultsUtils.getActiveResult();window.nnc.components.Editor.isLoadEnd=!1,ResultsUtils.getTrainResult(e.job_id,function(e){t._openNetworksInEditor(JSON.parse(e.configuration).networks),window.nnc.components.Editor.isLoadEnd=!0})},open_network_with_weight:function(){var t=this,e=ResultsUtils.getActiveResult();window.nnc.components.Editor.isLoadEnd=!1,ResultsUtils.getTrainResult(e.job_id,function(i){n.default.completeWeightParameter(JSON.parse(i.configuration),e.job_id,t._openNetworksInEditor),window.nnc.components.Editor.isLoadEnd=!0})},_openNetworksInEditor:function(t){n.default.load(t),nnc.editor.activeTabName=\"EDIT\"},delete_confirm:function(){var t=this,e=ResultsUtils.getActiveResult();window.nnc.components.Editor.popup(\"Confirm\",\"Do you really want to delete \"+e.job_name+\"?\",[{name:\"Cancel\"},{name:\"OK\",action:function(){t._delete(e.job_id)}}])},delete_all_incompletes:function(){var t=this;window.nnc.components.Editor.popup(\"Confirm\",\"Do you really want to delete all incomplete results?\",[{name:\"Cancel\"},{name:\"OK\",action:function(){results.data.filter(function(t){return\"failed\"===t.status}).forEach(function(e){t._delete(e.job_id)})}}])},_delete:function(t){n.default.callApi({url:i.default.CORE_API.usersUrl()+\"/projects/\"+nnc.editor.projectId+\"/jobs/\"+t,type:\"DELETE\",dataType:\"json\"},function(e){var n=results.data.findIndex(function(e){return e.job_id==t});n>=0&&(results.deletedJobs.push(t),results.data.splice(n,1));var i=Math.min(n,results.data.length-1);ResultsUtils.changeActive((results.data[i]||{}).job_id)},n.default.handleXhrFailure)},showUiState:function(t,e){switch(t+\"_\"+e){case\"profile_queued\":case\"train_queued\":case\"evaluate_queued\":return\"Scheduled\";case\"profile_preprocessing\":return\"BeforeProfiling\";case\"train_preprocessing\":return\"BeforeTraining\";case\"evaluate_preprocessing\":return\"BeforeEvaluating\";case\"profile_processing\":return\"Profiling\";case\"train_processing\":return\"Training\";case\"evaluate_processing\":return\"Evaluating\";case\"profile_finished\":case\"train_finished\":return\"\";case\"evaluate_finished\":return\"Evaluated\";case\"profile_suspended\":case\"train_suspended\":case\"evaluate_suspended\":return\"Suspended\";case\"profile_failed\":case\"train_failed\":case\"evaluate_failed\":return\"Incomplete\";default:return\"Error\"}},updateProgressIcons:function(){var t=new Image;t.src=\"./editor/image/CheckWhite.svg\";var e=function(e){var n=document.querySelector('[data-id=\"job-progress-'+e.job_id+'\"]');if(n){var i=n.getContext(\"2d\");i.canvas.width=24,i.canvas.height=24;var o=void 0,a=void 0,s=void 0,r=e.status;if(\"finished\"===r)o=100,a=\"pie\",\"evaluate\"===e.type&&(s=function(e){return e.drawImage(t,0,0,24,24)});else{var l=(e.train_status||{}).epoch||{current:0,max:1};o=Math.round(100*l.current/(l.max||1)),a=\"doughnut\"}new Chart(i,{type:a,data:{labels:[\"progress\",\"remaining\"],datasets:[{backgroundColor:[\"#006699\",[\"suspended\",\"failed\"].includes(r)?\"#c0c0c0\":\"#b0c4de\"],data:[o,100-o]}]},options:{animation:{duration:0},elements:{arc:{borderWidth:0}},tooltips:!1,responsive:!1,legend:{display:!1},hover:{mode:null}}}),(s||function(t){})(i)}};return function(){var n=this;t.complete?this.results.data.forEach(e):o.default.nextTick(function(){return n.updateProgressIcons()})}}(),loadMore:function(){var t=this;this.isLoading||(this.isLoading=!0,this.$emit(\"fetch-results\",function(){return t.isLoading=!1},results.data.length))},checkedBox:function(t){results.graph.comparison_id=results.graph.comparison_id!==t?t:\"\"}}}}(),module.exports.__esModule&&(module.exports=module.exports.default);var e=\"function\"==typeof module.exports?module.exports.options:module.exports;e.render=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"jobs-area app-row app-col\",on:{contextmenu:function(e){t.open_menu(\"\",e)}}},[n(\"div\",{staticClass:\"training-results app-row app-col app-scroll-x app-scroll-y\",attrs:{id:\"training-results\"}},[t._l(t.results.data,function(e){return n(\"div\",{key:e.job_id,staticClass:\"result nnc-invoker\",attrs:{href:\"#\"},on:{click:function(n){t.changeActive(e)},contextmenu:function(n){n.stopPropagation(),t.open_menu(e,n)}}},[n(\"div\",{class:[\"job\",-1!==t.results.active&&e.job_id===t.results.data[t.results.active].job_id?\"active\":\"\"]},[n(\"div\",{staticClass:\"job-content\"},[n(\"div\",{staticClass:\"job-top\"},[n(\"div\",{staticClass:\"job-top-image-btn\"},[n(\"img\",{staticClass:\"job-top-image nnc-enabled nnc-invoker\",attrs:{src:require(\"../../../image/Etc.svg\")},on:{click:function(n){t.open_menu(e,n,\"dropdown\")}}})]),t._v(\" \"),n(\"div\",{staticClass:\"job-headline\"},[n(\"canvas\",{attrs:{\"data-id\":\"job-progress-\"+[e.job_id]}}),t._v(\" \"),n(\"div\",{staticClass:\"job-title\",attrs:{\"data-id\":[e.id]}},[t._v(t._s(e.job_name))]),t._v(\" \"),n(\"div\",{staticClass:\"job-status\"},[t._v(t._s(t.showUiState(e.type,e.status)))])])]),t._v(\" \"),n(\"div\",{staticClass:\"job-property\"},[t._m(0,!0),t._v(\" \"),e.train_status&&\"profile\"!==e.type?n(\"div\",{staticClass:\"job-property-value\"},[n(\"p\",[t._v(t._s(t.showError((e.train_status.last||{}).train_error)))]),t._v(\" \"),n(\"p\",[t._v(t._s(t.showError((e.train_status.last||{}).valid_error)))]),t._v(\" \"),n(\"p\",[t._v(t._s(t.showError((e.train_status.best||{}).valid_error))+\"@\"+t._s((e.train_status.best||{}).epoch))]),t._v(\" \"),n(\"p\",[t._v(t._s(e.train_status.cost_multiply_add?e.train_status.cost_multiply_add:\"\"))])]):t._e()]),t._v(\" \"),\"queued\"!=e.status&&\"preprocessing\"!=e.status&&\"profile\"!==e.type?n(\"div\",{staticClass:\"job-compare\"},[n(\"nnc-checkbox\",{attrs:{label:\"Comparison\",value:e.job_id===t.results.graph.comparison_id},on:{input:function(n){t.checkedBox(e.job_id)}}}),t._v(\" \"),e.pareto_optimal?n(\"span\",{staticClass:\"pareto-optimal\"},[t._v(\"Pareto Optimal\")]):t._e()],1):t._e()])])])}),t._v(\" \"),t.results.data.length&&t.results.data.length<t.results.metadata.total?n(\"div\",{staticClass:\"load-more nnc-invoker\",on:{click:t.loadMore}},[n(\"img\",{staticClass:\"nnc-enabled\",class:[t.isLoading?\"loading\":\"\"],attrs:{src:require(\"../../../image/Load.svg\")}}),t._v(\"Load More\\n        \")]):t._e()],2),t._v(\" \"),n(\"context-menu\",{ref:\"context_menu\",attrs:{menuItems:t.menu_items}})],1)},e.staticRenderFns=[function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"job-property-name\"},[e(\"p\",[this._v(\"Training\")]),this._v(\" \"),e(\"p\",[this._v(\"Validation\")]),this._v(\" \"),e(\"p\",[this._v(\"Best Validation\")]),this._v(\" \"),e(\"p\",[this._v(\"Multiply Add\")])])}];"},"hash":"353fb6905f7286315c5dc295ea16bf74","cacheData":{"env":{}}}