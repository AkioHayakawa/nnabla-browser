{"dependencies":[{"name":"/home/akiohayakawa/workspace/browser_editor/package.json","includedInParent":true,"mtime":1532065308636},{"name":"vueify/lib/insert-css","loc":{"line":1,"column":39}},{"name":"babel-runtime/core-js/object/keys","loc":{"line":9,"column":20}},{"name":"babel-runtime/core-js/object/assign","loc":{"line":13,"column":22}},{"name":"../Jobs/ResultContentHeader.vue","loc":{"line":17,"column":35}},{"name":"../Jobs/ResultContentLog.vue","loc":{"line":21,"column":32}},{"name":"../../EditorWindowSize","loc":{"line":25,"column":32}},{"name":"../../TrainingGraphs","loc":{"line":29,"column":30}},{"name":"./../../EditorUtils","loc":{"line":31,"column":27}},{"name":"./../../misc/Definitions","loc":{"line":35,"column":27}},{"name":"vue/dist/vue.esm.js","loc":{"line":39,"column":22}}],"generated":{"js":"var e=require(\"vueify/lib/insert-css\").insert(\".result-content-main{width:100%}.legend{margin-left:50px}.legend-item{margin-right:32px}input{margin-right:0}.legend-item>.checkbox-label>.checkbox-label-span{padding:0;margin-right:15px}.legend-label-cost{border-top:solid 1px var(--color-brand)}.legend-label-training{border-top:solid 1px var(--color-system1)}.legend-label-validation{border-top:dashed 1px var(--color-system1)}.legend-trade-off{color:var(--color-system1)}.y.grid.trade-off line{stroke:hsla(0,100%,70%,.2)}.x.grid.trade-off line{stroke:var(--color-gray1)}input[type=number].no-spin-buttons::-webkit-inner-spin-button,input[type=number].no-spin-buttons::-webkit-outer-spin-button{-webkit-appearance:none}input[type=number].no-spin-buttons{-moz-appearance:textfield}\");!function(){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e,t,n,a,r,i,s=f(require(\"babel-runtime/core-js/object/keys\")),o=f(require(\"babel-runtime/core-js/object/assign\")),l=f(require(\"../Jobs/ResultContentHeader.vue\")),u=f(require(\"../Jobs/ResultContentLog.vue\")),c=f(require(\"../../EditorWindowSize\")),d=require(\"../../TrainingGraphs\"),p=f(require(\"./../../EditorUtils\")),v=f(require(\"./../../misc/Definitions\")),h=f(require(\"vue/dist/vue.esm.js\"));function f(e){return e&&e.__esModule?e:{default:e}}window.ResultContentHeader=l.default,window.ResultContentLog=u.default,window.results={data:[],active:-1,graph:{type:\"Learning Curve\",trade_off_type:\"All\",comparison_id:\"\",show_training_error:!0,show_validation_error:!0,scale:\"linear\"},metadata:{total:0},deletedJobs:[],evaluatable:function(){var e=this.data[this.active]||{};return[\"TRAINING\",\"EVALUATION\"].includes(nnc.editor.activeTabName)&&[\"train\",\"evaluate\"].includes(e.type)&&[\"suspended\",\"finished\"].includes(e.status)},merge:function(e){var t=this,n=-1!==this.active?this.data[this.active].job_id:null;e.forEach(function(e){var n=e.job_id;if(!t.deletedJobs.includes(n)){var a=t.data.find(function(e){return e.job_id===n});a?(0,o.default)(a,e):t.data.push((0,o.default)({logfile:\"\",evaluation_logfile:\"\",evaluate_status:\"\",confusionMatrix:{selectedModal:\"\",matrices:\"\"},current_epoch:void 0},e))}}),this.data.sort(function(e,t){return e.create_datetime<t.create_datetime?1:-1}),this.active=n?this.data.findIndex(function(e){return e.job_id===n}):-1}},window.ResultsUtils=(t=\"\",n=\"\",a=function(e){return p.default.is_active},r=function(e){if((e.train_status||e).monitoring_report){var t=(e.train_status||e).monitoring_report||{},n=(0,s.default)(t).sort(function(e,t){return e-t}),a=function(e){return function(n){return(t[n]||[])[e]}};(0,o.default)(e,{current_epoch:n.length,costs:n.map(a(\"cost\")),training_errors:n.map(a(\"train_error\")),validation_errors:n.map(a(\"valid_error\"))}),delete(e.train_status||e).monitoring_report}return e},i=function(e,t){return function(n,a,r){\"parsererror\"!==a&&(delete e.status_url,delete e.log_url),t()}},{changeActive:(e=-1,function(r){if(-1===results.active||r!==e)if(clearTimeout(t),clearTimeout(n),$(\".result-learning-curve svg\").remove(),void 0===r)e=void 0,results.active=-1;else{var i=results.data,s=i.findIndex(function(e){return e.job_id===r});if(-1!==s){var o=i[s];ResultsUtils.showResultContent(r),ResultsUtils.checkPareto(),window.EvaluationTab.showEvaluationContent(o),a()&&ResultsUtils.setPollingForTrainResult(o),e=r}else e=void 0;results.active=s}}),reloadGraphs:function(){d.learningCurveGraph.learningCurve(ResultsUtils.getActiveResult().job_id),d.tradeOffGraph.tradeOff()},getActiveResult:function(){return results.data[results.active]},getTrainResult:function(e,t){p.default.callApi({url:v.default.CORE_API.usersUrl()+\"/projects/\"+nnc.editor.projectId+\"/jobs/\"+e+\"/train_result\",type:\"get\",dataType:\"json\"},t,p.default.handleXhrFailure)},showResultContent:function(e,t){this.getTrainResult(e,function(n){n=r(n),(0,o.default)(results.data.find(function(t){return t.job_id==e}),n),\"queued\"!=n.status&&\"preprocessing\"!=n.status&&c.default.init(),t&&t()})},JobCostAndErrors:function(e){var t=function(e,t){return void 0!==e?e:t},n=e.train_status||{},a=(n.last||{}).valid_error;this.cost=function(e){return t(n.cost_multiply_add||e)},this.training=function(e){return t((n.last||{}).train_error,e)},this.validation=function(e){return t(a,e)},this.validationBest=function(e){return t((n.best||{}).valid_error,t(a,e))}},checkPareto:function(){var e=-1/0,t=1/0;results.data.map(function(e){var t=new ResultsUtils.JobCostAndErrors(e);return{pareto:function(t){return e.pareto_optimal=t},cost:Number(t.cost(1/0)),error:Number(t.validationBest(1/0))}}).sort(function(e,t){return e.cost-t.cost||e.error-t.error}).forEach(function(n){e!==n.cost?(e=n.cost,t=Math.min(t,n.error),n.pareto(n.error<=t)):n.pareto(n.error===t)})},setPollingForTrainResult:function(e){clearTimeout(t),function e(n){n.status_url&&n.log_url?(p.default.callApi({url:n.log_url,type:\"get\",headers:null,xhrFields:{withCredentials:!1}},function(e){n.logfile=e}),p.default.callApi({url:n.status_url,type:\"get\",headers:null,xhrFields:{withCredentials:!1}},function(a){\"\"!=a&&\"BEFORE_TRAINING\"!=a.status&&(a=r(a),n.status=a.status.toLowerCase(),n.current_epoch=a.current_epoch,n.costs=a.costs,n.training_errors=a.training_errors,n.validation_errors=a.validation_errors,n.costs=a.costs,h.default.set(n,\"train_status\",n.train_status||{}),(0,o.default)(n.train_status,a),c.default.init()),t=setTimeout(e,5e3,n),p.default.is_active(n)||clearTimeout(t)},i(n,function(){return t=setTimeout(e,5e3,n)}))):ResultsUtils.showResultContent(n.job_id,function(){t=setTimeout(e,5e3,n),p.default.is_active(n)||clearTimeout(t)})}(e)},setPollingForEvaluateResult:function(e){clearTimeout(n),function e(t){t.status_url&&t.log_url?(p.default.callApi({url:t.log_url,type:\"get\",headers:null,xhrFields:{withCredentials:!1}},function(e){t.evaluation_logfile=e,c.default.init()},p.default.handleXhrFailure),p.default.callApi({url:t.status_url,type:\"get\",headers:null,xhrFields:{withCredentials:!1}},function(a){switch(a&&(t.status=a.status,t.evaluate_status=a),a.status){case\"finished\":window.EvaluationTab.showEvaluationContent(t);case\"failed\":case\"suspended\":clearTimeout(n);break;default:n=setTimeout(e,5e3,t)}},i(t,function(){return n=setTimeout(e,5e3,t)}))):window.EvaluationTab.showEvaluationContent(t,function(a){switch(a.status){case\"finished\":case\"failed\":case\"suspended\":break;default:n=setTimeout(e,5e3,t)}})}(e)},getJobsInProgress:function(){return results.data.filter(a)}});var g=h.default.extend({props:[\"trainStatus\"],template:'\\n        <div class=\"result-content-main-header\">\\n            <result-content-header\\n                :current=\"currentEpoch\"\\n                :total=\"maxEpoch\"\\n                progress-name=\"Epoch\"\\n                :elapsed-time=\"elapsedTime\"\\n                :total-time=\"predictionTime\"\\n                />\\n        </div>\\n    ',components:{\"result-content-header\":l.default},data:function(){return results},computed:{currentEpoch:function(){return((this.trainStatus||{}).epoch||{}).current},maxEpoch:function(){return((this.trainStatus||{}).epoch||{}).max},elapsedTime:function(){return((this.trainStatus||{}).time||{}).elapsed},predictionTime:function(){return((this.trainStatus||{}).time||{}).prediction}}}),m=h.default.extend({template:'\\n        <div>\\n            <div v-show=\"graph.type==\\'Learning Curve\\'\">\\n                <nnc-loading v-if=\"(data[active].type === \\'train\\' && !data[active].current_epoch) || [\\'queued\\', \\'preprocessing\\'].includes(data[active].status)\" />\\n                <div v-else-if=\"data[active].type === \\'profile\\'\"></div>\\n                <div v-else-if=\"!isShowableLearningCurve\">\\n                    <span>The graph can not be displayed because it contains data of 0 or less.</span>\\n                </div>\\n                <div v-else>\\n                    <div class=\"legend\">\\n                        <span class=\"legend-item\">\\n                            <span class=\"legend-label-cost\">\\n                                Cost\\n                            </span>\\n                        </span>\\n                        <span class=\"legend-item\">\\n                            <nnc-checkbox label=\"\" v-model=\"graph.show_training_error\" @input=\"changeShowGraph\" />\\n                            <span class=\"legend-label-training\">\\n                                Training Error\\n                            </span>\\n                        </span>\\n                        <span class=\"legend-item\">\\n                            <nnc-checkbox label=\"\" v-model=\"graph.show_validation_error\" @input=\"changeShowGraph\" />\\n                            <span class=\"legend-label-validation\">\\n                                Validation Error\\n                            </span>\\n                        </span>\\n                    </div>\\n                    <div class=\"result-learning-curve\"></div>\\n                </div>\\n            </div>\\n            <div v-show=\"graph.type === \\'Trade-off Graph\\'\">\\n                <div v-if=\"!isShowableTradeOff\">\\n                    <span>The graph can not be displayed because it contains data of 0 or less.</span>\\n                </div>\\n                <div v-else>\\n                    <div class=\"legend\">\\n                        <span class=\"legend-item\">\\n                            <span class=\"legend-trade-off\">□</span>\\n                            Training Error\\n                        </span>\\n                        <span class=\"legend-item\">\\n                            <span class=\"legend-trade-off\">■</span>\\n                            Best Validation Error\\n                        </span>\\n                    </div>\\n                    <div class=\"result-trade-off\"></div>\\n                </div>\\n            </div>\\n        </div>\\n    ',data:function(){return results},computed:{isShowableLearningCurve:function(){for(var e=this.data[this.active]||{},t=function(t){return e[t]||0},n=0;n<(e.current_epoch||-1);++n)if(t(\"costs\")[n]>0||t(\"training_errors\")[n]>0||t(\"validation_errors\")[n]>0)return!0;return!1},isShowableTradeOff:function(){return this.data.some(function(e){var t=new ResultsUtils.JobCostAndErrors(e);return t.validationBest(0)>0||t.training(0)>0})}},methods:{changeShowGraph:function(){ResultsUtils.reloadGraphs()}}}),_=h.default.extend({props:{currentGraph:Object},template:'\\n        <div class=\"result-content-main-graphs\">\\n            <div @contextmenu=\"open_menu($event)\">\\n                <result-learning-curve />\\n                <context-menu ref=\"context_menu\" :menuItems=\"menu_items\">\\n                </context-menu>\\n            </div>\\n        </div>\\n    ',components:{\"result-learning-curve\":m},computed:{menu_items:function(){var e=this;return[{type:\"submenu\",text:\"View\",submenu:[{type:\"action\",text:\"Training&Validation\",action:this.show_training_validation},{type:\"action\",text:\"Training\",action:this.show_training},{type:\"action\",text:\"Validation\",action:this.show_validation}]},{type:\"action\",text:\"Log Scale Graph\",action:this.change_scale},{type:\"submenu\",text:\"Zoom\",submenu:[{type:\"action\",text:\"Default\",action:function(){return e.$emit(\"zoom-value\",100)}},{type:\"action\",text:\"Zoom In\",action:function(){return e.$emit(\"zoom-value\",e.values.next)},disabled:!this.values.canMoveNext},{type:\"action\",text:\"Zoom Out\",action:function(){return e.$emit(\"zoom-value\",e.values.prev)},disabled:!this.values.canMovePrev}]},{type:\"separator\"},{type:\"action\",text:\"Save CSV as...\",action:this.save_as_csv}]},values:function(){return p.default.indexOperator(this.currentGraph.percentages,this.currentGraph.percentage)}},methods:{open_menu:function(e){e.preventDefault(),this.$refs.context_menu.$emit(\"open\",{parent:this,event:e})},show_training_validation:function(){results.graph.show_training_error=!0,results.graph.show_validation_error=!0,ResultsUtils.reloadGraphs()},show_training:function(){results.graph.show_training_error=!0,results.graph.show_validation_error=!1,ResultsUtils.reloadGraphs()},show_validation:function(){results.graph.show_training_error=!1,results.graph.show_validation_error=!0,ResultsUtils.reloadGraphs()},change_scale:function(){results.graph.scale=\"linear\"===results.graph.scale?\"log\":\"linear\",ResultsUtils.reloadGraphs()},save_as_csv:function(){var e=\"\",t=document.createElement(\"a\");if(\"Learning Curve\"===results.graph.type){var n=ResultsUtils.getActiveResult();t.download=n.job_name+\"_\"+results.graph.type+\".csv\",e+=\"epoch,cost,train_error,valid_error\\n\";var a=n.training_errors,r=n.validation_errors;n.costs.forEach(function(t,n){e+=[(n+1).toString(),t,void 0!==a[n]?a[n]:\"\",void 0!==r[n]?r[n]:\"\"].join(\",\")+\"\\n\"})}else t.download=results.graph.type+\".csv\",e+=\"idx,name,terr,verr,madd,pareto\\n\",results.data.forEach(function(t,n){var a=new ResultsUtils.JobCostAndErrors(t);e+=[n.toString(),t.job_name,a.training(\"\"),a.validationBest(\"\"),a.cost(\"\"),(t.pareto_optimal?1:0).toString()].join(\",\")+\"\\n\"});var i=new Blob([e],{type:\"text/csv\"}),s=window.URL.createObjectURL(i);t.href=s,t.click()}}}),b=h.default.extend({props:{currentGraph:Object},template:'\\n        <div class=\"result-content-main\">\\n            <result-contents-main-graphs id=\"main-graphs-area\" :current-graph=\"currentGraph\" @zoom-value=\"value => $emit(\\'zoom-value\\', value)\" />\\n        </div>\\n    ',components:{\"result-contents-main-graphs\":_}}),w=h.default.extend({props:{currentGraph:Object},template:'\\n        <div class=\"action-bar\">\\n            <nnc-radio v-model=\"graph.type\" choice=\"Learning Curve\" />\\n            <nnc-radio v-model=\"graph.type\" choice=\"Trade-off Graph\" />\\n            <span>\\n                <select v-model=\"graph.trade_off_type\" @change=\"changeTradeOffType\">\\n                    <option v-for=\"option in trade_off_types\" v-bind:value=\"option\">\\n                        {{ option }}\\n                    </option>\\n                </select>\\n            </span>\\n            <nnc-radio :value=\"graph.scale\" @input=\"onGraphScaleChanged\" choice=\"linear\" label=\"Liner Scale\" />\\n            <nnc-radio :value=\"graph.scale\" @input=\"onGraphScaleChanged\" choice=\"log\"    label=\"Log Scale\" />\\n            <div class=\"pull-right\">\\n                <nnc-zoom-box :percentages=\"currentGraph.percentages\" :percentage=\"currentGraph.percentage\" @zoom-value=\"value => $emit(\\'zoom-value\\', value)\" />\\n            </div>\\n        </div>\\n    ',data:function(){return{graph:results.graph,trade_off_types:[\"All\",\"Previous\",\"Pareto Only\"]}},methods:{changeTradeOffType:function(){d.tradeOffGraph.tradeOff()},onGraphScaleChanged:function(e){this.graph.scale=e,ResultsUtils.reloadGraphs()}}});exports.default={props:{zoomInfo:Object},data:function(){return results},components:{\"result-content-main-header\":g,\"action-bar\":w,\"result-content-main\":b,\"result-content-log\":u.default}}}(),module.exports.__esModule&&(module.exports=module.exports.default);var t=\"function\"==typeof module.exports?module.exports.options:module.exports;t.render=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"training-main-area\"},[e.active>-1?n(\"div\",[n(\"result-content-main-header\",{attrs:{\"train-status\":(e.data[e.active]||{}).train_status}}),e._v(\" \"),n(\"action-bar\",{attrs:{\"current-graph\":e.zoomInfo},on:{\"zoom-value\":function(t){return e.$emit(\"zoom-value\",t)}}}),e._v(\" \"),n(\"result-content-main\",{staticClass:\"job-main-area\",attrs:{\"current-graph\":e.zoomInfo},on:{\"zoom-value\":function(t){return e.$emit(\"zoom-value\",t)}}}),e._v(\" \"),n(\"result-content-log\",{attrs:{log:e.data[e.active]?e.data[e.active].logfile:\"\"}})],1):n(\"span\",{staticClass:\"position-center error-message\"},[e._v(\"NO TRAINING RESULT SELECTED.\")])])},t.staticRenderFns=[];"},"hash":"a37c6b50a9b77e9ac1541d217c071201","cacheData":{"env":{}}}