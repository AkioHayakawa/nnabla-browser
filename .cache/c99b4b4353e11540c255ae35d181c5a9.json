{"dependencies":[{"name":"/home/akiohayakawa/workspace/browser_editor/package.json","includedInParent":true,"mtime":1532065308636},{"name":"vueify/lib/insert-css","loc":{"line":1,"column":39}},{"name":"./../../currentGraph","loc":{"line":9,"column":28}},{"name":"./../../editor/SDNLayer","loc":{"line":13,"column":24}},{"name":"./../../misc/Definitions","loc":{"line":17,"column":27}}],"generated":{"js":"var e=require(\"vueify/lib/insert-css\").insert('.icon-small{width:16px;height:16px}.category .icon-small{padding-top:0;margin-right:8px;vertical-align:middle}.category .title{margin-top:0}.category .component,.category .title{padding-top:3px;height:24px;margin-left:0}.category .component{padding-left:40px}.property-area .title{margin-top:0;padding-top:12px}.property-area .layer{font-family:SSTUI-Medium;margin-top:8px;font-size:16px;width:100%;height:24px}.property-area .layer>.drop-cap{position:absolute;left:16px;font-family:SSTUI-Medium;color:var(--color-gray0);letter-spacing:0;text-align:center;width:24px;height:24px;line-height:24px;background-color:var(--color-brand)}.property-area .layer>.name{position:absolute;left:48px;right:40px;line-height:24px;overflow-x:hidden}.property-area .layer>a{position:absolute;right:16px;width:24px;height:24px;display:inline-block;background-image:url(../../../../editor/image/Dictionary.svg);background-position:100%;background-repeat:no-repeat;background-size:24px 24px;filter:brightness(0)}.property-area .property{padding:0;margin:0;padding-left:16px;padding-right:16px}.property-area .property .content{height:25px;border-bottom:solid 1px var(--color-gray2);padding-top:3px}.property-area .property .name{float:left;overflow:hidden;color:var(--color-gray4);width:50%;padding-right:4px}.property-area .property .value{float:left;overflow:hidden;color:var(--color-gray5);width:50%;padding-left:4px}.property input[type=text]{width:100%}.property input[type=text]:not(:focus){border-color:transparent;outline-color:transparent;background-color:transparent}.property label{cursor:pointer;position:relative;height:16px}.property label>input[type=checkbox]{display:none}.property label>input[type=checkbox]+span{display:inline-block;vertical-align:text-bottom;width:32px;height:13px;border-radius:13px;background-color:var(--color-gray4)}.property label>input[type=checkbox]:checked+span{background-color:var(--color-brand)}.property label>input[type=checkbox]+span:after{display:inline-block;content:\"\";margin:1px;width:11px;height:11px;border-radius:11px;background-color:var(--color-gray1);transition:margin .125s}.property label>input[type=checkbox]:checked+span:after{margin-left:20px}.property select{width:100%}.property select:not(:active){border-color:transparent;outline-color:transparent;background-color:transparent}.property .content .value.warning:after{width:16px;height:16px;display:inline-block;content:\"\";position:absolute;right:16px;background-image:url(../../../image/Warning.svg);background-size:16px 16px}');!function(){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e=r(require(\"./../../currentGraph\")),t=r(require(\"./../../editor/SDNLayer\")),n=r(require(\"./../../misc/Definitions\"));function r(e){return e&&e.__esModule?e:{default:e}}var o={props:{selectedComponent:String},template:'\\n<div>\\n    <div class=\"title\">Layer Component</div>\\n    <div class=\"app-row app-scroll-x app-scroll-y\" style=\"top: 40px; bottom: 0; padding: 0 16px 0 16px;\">\\n        <component-category\\n            v-for=\"category in categories\"\\n            :key=\"category.name\"\\n            :category=\"category\"\\n            :selected-component=\"selectedComponent\"\\n            @update:selected=\"onUpdateSelected\"\\n            />\\n    </div>\\n</div>',data:function(){return{categories:nNablaCore.layers.categories}},components:{\"component-category\":{props:[\"category\",\"selectedComponent\"],template:'\\n    <div class=\"category\">\\n        <div class=\"nnc-invoker title\" @click=\"expand = !expand;\"\\n            ><img class=\"icon-small\" :src=\"\\'./editor/image/Arrow\\' + (expand ? \\'Down\\' : \\'\\') + \\'.svg\\'\"></img\\n            >{{ category.name }}</div>\\n        <div class=\"components\" :style=\"{display: expand ? \\'block\\' : \\'none\\'}\">\\n            <component-layer\\n                v-for=\"name in category.components\"\\n                :name=\"name\"\\n                :key=\"name\"\\n                :class=\"selectedComponent === name ? \\'active\\' : \\'\\'\"\\n                @update:selected=\"$emit(\\'update:selected\\', name)\"\\n                />\\n        </div>\\n    </div>\\n    ',data:function(){return{expand:!0}},components:{\"component-layer\":{props:[\"name\"],template:'\\n            <div class=\"nnc-invoker component\"\\n                tabIndex=\"1000\"\\n                :id=\"_headLower(name)\"\\n                draggable=\"true\"\\n                @click.prevent=\"_setFocus\"\\n                @dblclick.prevent=\"_addLayer\"\\n                @keyup.enter.prevent=\"_addLayer\"\\n                >{{ name }}</div>',methods:{_headLower:function(e){return e.substring(0,1).toLowerCase()+e.substring(1)},_emitSelected:function(){this.$emit(\"update:selected\",this.name)},_setFocus:function(e){e.target.focus(),this._emitSelected()},_addLayer:function(e){window.uop()&&(e.target.focus(),this._emitSelected(),window.svgArea.addLayer(this.name))}}}}}},methods:{onUpdateSelected:function(e){this.$emit(\"selected-component\",e)}},mounted:function(){var r=this,o=void 0,a=function a(i){var p=window.svgArea;p.unsubscribeMouseEnter(a);var c=r.selectedComponent;e.default.selection.clear();var s={x:i.x-n.default.EDIT.LAYER.RECT_WIDTH/2,y:i.y-n.default.EDIT.LAYER.RECT_HEIGHT/2};o=function(){var o={type:c,x:s.x,y:s.y},a=new t.default(o,p);e.default.selection.layer.focus(a),a.autoLink(),p.showGrid();var i=p.createLayerDestinationFrame(s);return{move:function(e){var t={x:e.x-n.default.EDIT.LAYER.RECT_WIDTH/2,y:e.y-n.default.EDIT.LAYER.RECT_HEIGHT/2};a.setPosition(t),i.move(p.calcLayerDropPosition(a)),p.trackCursorMovement(e)},destroy:function(){p.hideGrid();var n=p.calcLayerDropPosition(a);a.setPosition(n);var o=a.autoLink();i.destroy(),p.requestAdjustSize();var s,l=a.serialize();s={exec:function(){var n=t.default.deserialize(l);e.default.selection.clear(),e.default.selection.layer.focus(n),o.redo(),p.requestAdjustSize()},undo:function(){o.undo(),t.default.findObjectBySerialized(l).remove(),p.requestAdjustSize()},name:function(){return\"Add layer : \"+c}},r.$emit(\"history\",{type:\"push\",argument:s})}}}()};d3.selectAll(\".component\").call(d3.behavior.drag().on(\"dragstart\",function(){var e,t=$(this).text();$(this)[0].focus(),e=t,r.onUpdateSelected(e),o={move:function(e){},destroy:function(){}},window.svgArea.subscribeMouseEnter(a)}).on(\"drag\",function(){var e=d3.mouse(d3.select(n.default.EDIT.SVG_ID).node());o.move({x:e[0],y:e[1]})}).on(\"dragend\",function(){o.destroy(),o=void 0,window.svgArea.unsubscribeMouseEnter(a)}))}},a={props:[\"selection\"],template:'\\n<div class=\"property-area\">\\n    <div class=\"title\">Layer Property</div>\\n    <layer-type :layer=\"layer\" />\\n    <selected-layers :selection=\"selection\" />\\n    <layer-properties class=\"app-row app-scroll-x app-scroll-y\" style=\"top: 88px; bottom: 0;\"\\n        :layer=\"layer\"\\n        @renamed=\"onrenamed\"\\n        @history=\"command => $emit(\\'history\\', command)\"\\n    />\\n</div>',components:{\"layer-type\":{props:[\"layer\"],template:'\\n        <div class=\"layer\" :style=\"style\">\\n        <div class=\"drop-cap\" :style=\"{\\'background-color\\': color}\">{{ type.substring(0, 1) }}</div>\\n        <div class=\"name\">{{ type }}</div>\\n        <a title=\"Refer documentation\" :href=\"\\'https://support.dl.sony.com/391/#\\' + type\" target=\"_blank\" />\\n        </div>\\n        ',computed:{style:function(){return this.layer?{}:{visibility:\"hidden\"}},color:function(){return this.layer?this.layer.color:\"transparent\"},type:function(){return this.layer?this.layer.type:\"\"}}},\"selected-layers\":{props:[\"selection\"],template:'<div style=\"height: 24px; padding-left: 48px;\">\\n        <span v-if=\"selection.main\"><span v-if=\"number\">and {{ number }} more {{ text(number) }}</span></span>\\n        <span v-else-if=\"total\">{{ total }} {{ text(total) }}</span>\\n        </div>',computed:{number:function(){return Math.max(0,this.selection.all.length-1)},total:function(){return(this.selection.all||[]).length}},methods:{text:function(e){return\"layer\"+(1===e?\" is\":\"s are\")+\" selected.\"}}},\"layer-properties\":{props:[\"layer\"],template:'<div>\\n            <div class=\"property\" v-for=\"property in ((layer || {}).props || [])\">\\n                <div class=\"content\">\\n                    <div class=\"name\">{{ property.name }}</div>\\n                    <component\\n                    :is=\"\\'prop-\\' + property.type\"\\n                    :property=\"property\"\\n                    :class=\"\\'value\\' + (property.error ? \\' warning\\' : \\'\\')\"\\n                    :title=\"property.error\"\\n                    @update=\"onupdate\"\\n                    @renaming=\"onrenaming\"\\n                    @renamed=\"onrenamed\"\\n                    />\\n                </div>\\n            </div>\\n        </div>',components:{\"prop-immutable\":{props:[\"property\"],template:'<div style=\"color: var(--color-brand);\">{{ property.computed }}</div>'},\"prop-name\":{props:[\"property\"],template:'<input type=\"text\" :value=\"property.value\"\\n                @focus=\"onfocus\"\\n                @blur=\"onblur\"\\n                @keyup.enter=\"defocus\"\\n                @keyup.esc=\"defocus\"\\n                @keypress=\"onkeypress\"\\n                />',methods:{onfocus:function(e){e.target.select()},onblur:function(e){this.$emit(\"renamed\",e.target.value)},onkeypress:function(e){switch(e.key){case\"!\":case\"@\":case\"#\":case\"$\":case\"%\":case\"^\":case\"&\":case\"*\":case\"(\":case\")\":case\"-\":case\"+\":case\"=\":case\"|\":case\"\\\\\":case\"~\":case\"`\":case\"{\":case\"}\":case\"[\":case\"]\":case\":\":case\";\":case'\"':case\",\":case\".\":case\"<\":case\">\":case\"/\":case\"?\":e.preventDefault()}\"#\"===e.key&&document.execCommand(\"insertText\",!1,\"_\");var t=this;setTimeout(function(){t.$emit(\"renaming\",e.target.value)})},defocus:function(e){e.target.blur()}}},\"prop-text\":{props:[\"property\"],template:'<div>\\n                <input type=\"text\" :value=\"property.computed\"\\n                @focus=\"onfocus\"\\n                @blur=\"onblur\"\\n                @keyup.enter=\"defocus\"\\n                @keyup.esc=\"defocus\"\\n                /></div>',methods:{onfocus:function(e){e.target.value=this.property.value,e.target.select()},onblur:function(e){this.$emit(\"update\",{name:this.property.name,value:e.target.value}),e.target.value=this.property.computed},defocus:function(e){e.target.blur()}}},\"prop-bool\":{props:[\"property\"],template:'<div @click.self=\"onclick\">\\n                <label><input type=\"checkbox\" ref=\"check\" :checked=\"checked\" @change=\"onchange\" /><span /></label>\\n                </div>',computed:{checked:function(){return\"true\"===String(this.property.value||!1).toLowerCase()}},methods:{onclick:function(){this.$refs.check.click()},onchange:function(e){this.$emit(\"update\",{name:this.property.name,value:Boolean(e.target.checked)})}}},\"prop-select\":{props:[\"property\"],template:'<select :value=\"property.value\" @change=\"onchange\">\\n                <option v-for=\"value in property.choice\" :checked=\"value === property.value\">{{ value }}</option>\\n                </select>',methods:{onchange:function(e){this.$emit(\"update\",{name:this.property.name,value:e.target.value})}}}},data:function(){return{}},methods:{onupdate:function(t){var n=e.default.selection.layer.apply(function(e){var n=e.getUserInputProperty(t.name);return t.value===n?null:{layer:e.name(),from:n,to:t.value}}).filter(function(e){return e}),r=function(r){var o=e.default.layers();n.forEach(function(e){var n=o.find(function(t){return t.name()===e.layer});n&&n.setUserInputProperty(t.name,e[r])})};if(n.length){var o=\"Edit property : \"+this.layer.type+\" -> \"+t.name;this.$emit(\"history\",{type:\"push-and-execute\",argument:{name:function(){return o},exec:function(){return r(\"to\")},undo:function(){return r(\"from\")}}})}},onrenaming:function(t){var n=this.rename;if(!n){var r=e.default.selection.layer.members(),o=e.default.selection.layer.focused(),a=void 0;a=o?[o].concat(r.filter(function(e){return e!==o})):r,n={component:this.layer.type,items:a.map(function(e){return{layer:e,name:e.name()}})}}n.items.forEach(function(e){return e.layer.setUserInputProperty(\"Name\",t)}),this.rename=n},onrenamed:function(t){var n=this,r=this.rename;delete this.rename;var o=r.items.map(function(e){return{from:e.name,to:e.layer.name()}}).filter(function(e){return e.from!==e.to}),a=function(t){var r=e.default.layers();t.forEach(function(e){r.find(function(t){return t.name()===e.from}).name(e.to),n.$emit(\"renamed\",t)})};if(o.length){var i=\"Edit property : \"+r.component+\" -> Name\";this.$emit(\"history\",{type:\"push\",argument:{name:function(){return i},exec:function(){return a(o)},undo:function(){return a(function(e){return e.map(function(e){return{from:e.to,to:e.from}})}(o))}}})}this.$emit(\"renamed\",o)}}}},computed:{layer:function(){return this.selection.props}},methods:{onrenamed:function(e){this.$emit(\"renamed\",e)}}};exports.default={props:[\"selection\",\"selectedComponent\"],components:{\"component-palette\":o,\"property-area\":a},methods:{onrenamed:function(e){this.$emit(\"renamed\",e)}}}}(),module.exports.__esModule&&(module.exports=module.exports.default);var t=\"function\"==typeof module.exports?module.exports.options:module.exports;t.render=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"app-row\",staticStyle:{top:\"0\",bottom:\"0\"}},[n(\"component-palette\",{staticClass:\"app-row\",staticStyle:{top:\"0\",bottom:\"310px\",\"border-bottom\":\"1px solid var(--color-gray2)\"},attrs:{\"selected-component\":e.selectedComponent},on:{\"selected-component\":function(t){return e.$emit(\"selected-component\",t)},history:function(t){return e.$emit(\"history\",t)}}}),e._v(\" \"),n(\"property-area\",{staticClass:\"app-row\",staticStyle:{height:\"310px\",bottom:\"0\"},attrs:{selection:e.selection},on:{renamed:e.onrenamed,history:function(t){return e.$emit(\"history\",t)}}})],1)},t.staticRenderFns=[];"},"hash":"972c192a7ede7aeadbf21a0eb7636a0a","cacheData":{"env":{}}}