{"dependencies":[{"name":"/home/akiohayakawa/workspace/browser_editor/package.json","includedInParent":true,"mtime":1532065308636},{"name":"./editor/SDUUtils","loc":{"line":1,"column":21}},{"name":"./editor/SDNLayer","loc":{"line":2,"column":18}},{"name":"./editor/SDNLink","loc":{"line":3,"column":17}}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e=require(\"./editor/SDUUtils\"),n=o(e),t=require(\"./editor/SDNLayer\"),r=o(t),i=require(\"./editor/SDNLink\"),u=o(i);function o(e){return e&&e.__esModule?e:{default:e}}var c=function(){var e,t,i,o,s,f=new n.default.Set,a=new n.default.Set,l=(t=new function(e){var n=this,t=null;this.insert=function(e){return e.select(!0)},this.focus=function(e){e.selected()||this.clear(),t&&t!==e&&t.flagAsMain(!1),t=e,Array.from(arguments).forEach(function(e){return e.select(!0)}),e.flagAsMain(!0)},this.focused=function(){return t},this.remove=function(e){t===e&&(e.flagAsMain(!1),t=null),e.select(!1)},this.clear=function(){return e.apply(function(e){return n.remove(e)})},this.members=function(){return e.members().filter(function(e){return e.selected()})},this.apply=function(e){return n.members().map(e)}}(f),e=void 0,{layer:t,link:i={focus:function(n){(e=n).select(!0)},focused:function(){return e},remove:function(n){n===e&&e&&(e.select(!1),e=null)},clear:function(){this.remove(e)}},change:function(e){var n=t.focused();i.clear(),t.clear(),(e||[]).forEach(function(e){return t.insert(e)}),(e||[]).includes(n)&&t.focus(n)},append:function(e){var n=t.focused();e.filter(function(e){return e!==n}).forEach(function(e){return t.insert(e)})},invert:function(e){var n=e.concat();t.members().forEach(function(e){var t=n.findIndex(function(n){return n===e});-1!==t&&n.splice(t,1)}),this.change(n)},clear:function(){t.clear(),i.clear()},isEmpty:function(){return 0===t.members().length&&!i.focused()},members:function(){var e=t.members(),r=new n.default.Set;return i.focused()&&r.insert(i.focused()),e.map(function(e){return e.allLinks()}).reduce(function(e,n){return e.concat(n)},[]).forEach(function(e){return r.insert(e)}),{nodes:e,links:r.members()}}});return{layers:function(e){return f.apply(e||function(e){return e})},insertLayer:function(e){f.insert(e),window.nnc.components.Editor.onAddedLayer(e)},removeLayer:function(e){l.layer.remove(e),f.remove(e)},links:function(e){return a.apply(e||function(e){return e})},insertLink:function(e){return a.insert(e)},removeLink:function(e){l.link.remove(e),a.remove(e)},selection:l,selectAll:function(){c.selection.append(this.layers())},invertSelection:function(){c.selection.invert(this.layers())},deleteSelection:function(e){var n=this.selection.members(),t=n.nodes.map(function(e){return e.serialize()}),i=n.links.map(function(e){return e.serialize()});window.nnc.components.Editor.history.execute({type:\"push-and-execute\",argument:{exec:function(){i.map(u.default.findObjectBySerialized).forEach(function(e){return e.remove()}),t.map(r.default.findObjectBySerialized).forEach(function(e){return e.remove()}),window.svgArea.requestAdjustSize()},undo:function(){t.forEach(r.default.deserialize),i.forEach(u.default.deserialize),window.svgArea.requestAdjustSize()},name:function(){return e}}})},clear:function(){this.layers(function(e){return e.remove()}),this.links(function(e){return e.remove()})},setDirtyLinksOf:(o=void 0,s=new n.default.Set,function(e){clearTimeout(o),o=setTimeout(function(){s.apply(function(e){return e.updateLinkLine()}),s.clear()},0),e.allLinks().forEach(function(e){return s.insert(e)})})}}();window.Graph=c,exports.default=c;"},"hash":"365f57a3e2ef769f23b74205e2b244f9","cacheData":{"env":{}}}